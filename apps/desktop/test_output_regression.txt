
 RUN  v2.1.9 /home/jhonslife/CICLOGIRO/GIRO/apps/desktop

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should show loading state on mount
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Initializing...

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should render activation form when no license exists
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.
[LicenseActivationPage] Showing loading screen (isValidating=true)

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should render activation form when no license exists
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should format license key during typing
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should handle successful activation
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.
[LicenseActivationPage] Activation success, redirecting in 1.5s...

stdout | src/pages/cash/__tests__/CashControlPage.test.tsx > CashControlPage > should handle opening a cash session
DEBUG: handleOpenSession called 100
DEBUG: mutateAsync completed

stdout | src/pages/cash/__tests__/CashControlPage.test.tsx > CashControlPage > should handle session opening failure
DEBUG: handleOpenSession called 100

stderr | src/pages/cash/__tests__/CashControlPage.test.tsx > CashControlPage > should handle session opening failure
Error: Open Fail
    at /home/jhonslife/CICLOGIRO/GIRO/apps/desktop/src/pages/cash/__tests__/CashControlPage.test.tsx:118:7
    at file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1056:17)
    at runSuite (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1271:3)
    at file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/vitest@2.1.9_@types+node@22.19.7_@vitest+ui@2.1.9_jsdom@25.0.1/node_modules/vitest/dist/chunks/runBaseTests.3qpJUEJM.js:126:11

stderr | src/pages/cash/__tests__/CashControlPage.test.tsx > CashControlPage > should handle adding a cash movement (Suprimento)
Error: [vitest] No "cashSessionKeys" export is defined on the "@/hooks/usePDV" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/vitest@2.1.9_@types+node@22.19.7_@vitest+ui@2.1.9_jsdom@25.0.1/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/vitest@2.1.9_@types+node@22.19.7_@vitest+ui@2.1.9_jsdom@25.0.1/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Object.onSuccess (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/src/hooks/useSales.ts:236:49)
    at Mutation.execute (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@tanstack+query-core@5.90.17/node_modules/@tanstack/query-core/src/mutation.ts:244:26)
    at addMovement (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/src/pages/cash/CashControlPage.tsx:83:7) {
  codeFrame: 'vi.mock(import("@/hooks/usePDV"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}

 âœ“ src/hooks/__tests__/useSales.test.tsx (15 tests) 609ms
stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should handle successful activation
[LicenseActivationPage] Executing navigate to /

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should redirect to /setup after activation if has_admin is false
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.
[LicenseActivationPage] Activation success, redirecting in 1.5s...

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should redirect to /setup after activation if has_admin is false
[LicenseActivationPage] Executing navigate to /setup

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should redirect to / after activation if has_admin is true
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.
[LicenseActivationPage] Activation success, redirecting in 1.5s...

stderr | src/pages/cash/__tests__/CashControlPage.test.tsx > CashControlPage > should handle adding a cash movement (Sangria)
Error: [vitest] No "cashSessionKeys" export is defined on the "@/hooks/usePDV" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/vitest@2.1.9_@types+node@22.19.7_@vitest+ui@2.1.9_jsdom@25.0.1/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/vitest@2.1.9_@types+node@22.19.7_@vitest+ui@2.1.9_jsdom@25.0.1/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Object.onSuccess (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/src/hooks/useSales.ts:236:49)
    at Mutation.execute (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@tanstack+query-core@5.90.17/node_modules/@tanstack/query-core/src/mutation.ts:244:26)
    at addMovement (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/src/pages/cash/CashControlPage.tsx:83:7) {
  codeFrame: 'vi.mock(import("@/hooks/usePDV"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}

stderr | src/pages/cash/__tests__/CashControlPage.test.tsx > CashControlPage > should handle movement registration failure
Error: [vitest] No "cashSessionKeys" export is defined on the "@/hooks/usePDV" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/vitest@2.1.9_@types+node@22.19.7_@vitest+ui@2.1.9_jsdom@25.0.1/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/vitest@2.1.9_@types+node@22.19.7_@vitest+ui@2.1.9_jsdom@25.0.1/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Object.onSuccess (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/src/hooks/useSales.ts:236:49)
    at Mutation.execute (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@tanstack+query-core@5.90.17/node_modules/@tanstack/query-core/src/mutation.ts:244:26)
    at addMovement (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/src/pages/cash/CashControlPage.tsx:83:7) {
  codeFrame: 'vi.mock(import("@/hooks/usePDV"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should redirect to / after activation if has_admin is true
[LicenseActivationPage] Executing navigate to /

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should handle activation error
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should redirect if valid license is found on mount
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Post-hydration: key=EXISTING-KEY, state=valid
[LicenseActivationPage] Valid license or within grace period, proceeding to root
[LicenseActivationPage] Showing loading screen (isValidating=true)

 âœ“ src/pages/license/__tests__/LicenseActivationPage.test.tsx (8 tests) 4747ms
   âœ“ LicenseActivationPage > should handle successful activation 1536ms
   âœ“ LicenseActivationPage > should redirect to /setup after activation if has_admin is false 1525ms
   âœ“ LicenseActivationPage > should redirect to / after activation if has_admin is true 1522ms
 â¯ src/pages/cash/__tests__/CashControlPage.test.tsx (11 tests | 3 failed) 5386ms
   Ã— CashControlPage > should handle adding a cash movement (Suprimento) 3046ms
     â†’ expected "spy" to be called with arguments: [ 'add_cash_movement', â€¦(1) ]

Received: 



Number of calls: 0


Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body[39m
    [33mdata-scroll-locked[39m=[32m"1"[39m
    [33mstyle[39m=[32m"pointer-events: none;"[39m
  [36m>[39m
    [36m<span[39m
      [33maria-hidden[39m=[32m"true"[39m
      [33mdata-aria-hidden[39m=[32m"true"[39m
      [33mdata-radix-focus-guard[39m=[32m""[39m
      [33mstyle[39m=[32m"outline: none; opacity: 0; position: fixed; pointer-events: none;"[39m
      [33mtabindex[39m=[32m"0"[39m
    [36m/>[39m
    [36m<div[39m
      [33maria-hidden[39m=[32m"true"[39m
      [33mdata-aria-hidden[39m=[32m"true"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex flex-col gap-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h1[39m
              [33mclass[39m=[32m"text-2xl font-bold tracking-tight"[39m
            [36m>[39m
              [0mControle de Caixa[0m
            [36m</h1>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-muted-foreground"[39m
            [36m>[39m
              [0mCaixa aberto desde 06:00 de 01/01/2025[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex gap-2"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-printer"[39m
              [36m/>[39m
              [0mImprimir Resumo[0m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 ml-2"[39m
              [33mdata-testid[39m=[32m"cash-supply"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-arrow-ur"[39m
              [36m/>[39m
              [0mSuprimento[0m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 ml-2"[39m
              [33mdata-testid[39m=[32m"cash-withdrawal"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-arrow-dr"[39m
              [36m/>[39m
              [0mSangria[0m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-destructive text-destructive-foreground hover:bg-destructive/90 h-10 px-4 py-2"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-clock"[39m
              [36m/>[39m
              [36m<span[39m
                [33mdata-testid[39m=[32m"close-cash"[39m
              [36m>[39m
                [0mFechar Caixa[0m
              [36m</span>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border text-card-foreground shadow-sm border-green-500 bg-green-50/50"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 flex items-center gap-4 py-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mdata-testid[39m=[32m"icon-check"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<p[39m
                [33mclass[39m=[32m"font-semibold text-green-800"[39m
              [36m>[39m
                [0mCaixa Aberto[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-green-600"[39m
              [36m>[39m
                [0mOperador: [0m
                [0mNÃ£o identificado[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-muted-foreground mt-1"[39m
                [33mdata-testid[39m=[32m"cash-balance"[39m
              [36m>[39m
                [0mR$Â 0,00[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border bg-card text-card-foreground shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight"[39m
            [36m>[39m
              [0mMovimentaÃ§Ãµes[0m
            [36m</h3>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
            [36m>[39m
              [0mEntradas e saÃ­das do caixa[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"overflow-auto"[39m
            [36m>[39m
              [36m<table[39m
                [33mclass[39m=[32m"w-full table-auto"[39m
                [33mdata-testid[39m=[32m"movements-list"[39m
              [36m>[39m
                [36m<thead>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"text-left"[39m
                  [36m>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"py-2"[39m
                    [36m>[39m
                      [0mTipo[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"py-2"[39m
                    [36m>[39m
            ...
   Ã— CashControlPage > should handle adding a cash movement (Sangria) 1039ms
     â†’ expected "spy" to be called with arguments: [ 'add_cash_movement', â€¦(1) ]

Received: 



Number of calls: 0


Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body[39m
    [33mdata-scroll-locked[39m=[32m"1"[39m
    [33mstyle[39m=[32m"pointer-events: none;"[39m
  [36m>[39m
    [36m<span[39m
      [33maria-hidden[39m=[32m"true"[39m
      [33mdata-aria-hidden[39m=[32m"true"[39m
      [33mdata-radix-focus-guard[39m=[32m""[39m
      [33mstyle[39m=[32m"outline: none; opacity: 0; position: fixed; pointer-events: none;"[39m
      [33mtabindex[39m=[32m"0"[39m
    [36m/>[39m
    [36m<div[39m
      [33maria-hidden[39m=[32m"true"[39m
      [33mdata-aria-hidden[39m=[32m"true"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex flex-col gap-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h1[39m
              [33mclass[39m=[32m"text-2xl font-bold tracking-tight"[39m
            [36m>[39m
              [0mControle de Caixa[0m
            [36m</h1>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-muted-foreground"[39m
            [36m>[39m
              [0mCaixa aberto desde 06:00 de 01/01/2025[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex gap-2"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-printer"[39m
              [36m/>[39m
              [0mImprimir Resumo[0m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 ml-2"[39m
              [33mdata-testid[39m=[32m"cash-supply"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-arrow-ur"[39m
              [36m/>[39m
              [0mSuprimento[0m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 ml-2"[39m
              [33mdata-testid[39m=[32m"cash-withdrawal"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-arrow-dr"[39m
              [36m/>[39m
              [0mSangria[0m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-destructive text-destructive-foreground hover:bg-destructive/90 h-10 px-4 py-2"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-clock"[39m
              [36m/>[39m
              [36m<span[39m
                [33mdata-testid[39m=[32m"close-cash"[39m
              [36m>[39m
                [0mFechar Caixa[0m
              [36m</span>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border text-card-foreground shadow-sm border-green-500 bg-green-50/50"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 flex items-center gap-4 py-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mdata-testid[39m=[32m"icon-check"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<p[39m
                [33mclass[39m=[32m"font-semibold text-green-800"[39m
              [36m>[39m
                [0mCaixa Aberto[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-green-600"[39m
              [36m>[39m
                [0mOperador: [0m
                [0mNÃ£o identificado[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-muted-foreground mt-1"[39m
                [33mdata-testid[39m=[32m"cash-balance"[39m
              [36m>[39m
                [0mR$Â 0,00[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border bg-card text-card-foreground shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight"[39m
            [36m>[39m
              [0mMovimentaÃ§Ãµes[0m
            [36m</h3>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
            [36m>[39m
              [0mEntradas e saÃ­das do caixa[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"overflow-auto"[39m
            [36m>[39m
              [36m<table[39m
                [33mclass[39m=[32m"w-full table-auto"[39m
                [33mdata-testid[39m=[32m"movements-list"[39m
              [36m>[39m
                [36m<thead>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"text-left"[39m
                  [36m>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"py-2"[39m
                    [36m>[39m
                      [0mTipo[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"py-2"[39m
                    [36m>[39m
            ...
   Ã— CashControlPage > should handle movement registration failure 1038ms
     â†’ expected "spy" to be called at least once

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body[39m
    [33mdata-scroll-locked[39m=[32m"1"[39m
    [33mstyle[39m=[32m"pointer-events: none;"[39m
  [36m>[39m
    [36m<span[39m
      [33maria-hidden[39m=[32m"true"[39m
      [33mdata-aria-hidden[39m=[32m"true"[39m
      [33mdata-radix-focus-guard[39m=[32m""[39m
      [33mstyle[39m=[32m"outline: none; opacity: 0; position: fixed; pointer-events: none;"[39m
      [33mtabindex[39m=[32m"0"[39m
    [36m/>[39m
    [36m<div[39m
      [33maria-hidden[39m=[32m"true"[39m
      [33mdata-aria-hidden[39m=[32m"true"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex flex-col gap-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h1[39m
              [33mclass[39m=[32m"text-2xl font-bold tracking-tight"[39m
            [36m>[39m
              [0mControle de Caixa[0m
            [36m</h1>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-muted-foreground"[39m
            [36m>[39m
              [0mCaixa aberto desde 22:22 de 18/01/2026[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex gap-2"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-printer"[39m
              [36m/>[39m
              [0mImprimir Resumo[0m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 ml-2"[39m
              [33mdata-testid[39m=[32m"cash-supply"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-arrow-ur"[39m
              [36m/>[39m
              [0mSuprimento[0m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 ml-2"[39m
              [33mdata-testid[39m=[32m"cash-withdrawal"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-arrow-dr"[39m
              [36m/>[39m
              [0mSangria[0m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-destructive text-destructive-foreground hover:bg-destructive/90 h-10 px-4 py-2"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-clock"[39m
              [36m/>[39m
              [36m<span[39m
                [33mdata-testid[39m=[32m"close-cash"[39m
              [36m>[39m
                [0mFechar Caixa[0m
              [36m</span>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border text-card-foreground shadow-sm border-green-500 bg-green-50/50"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 flex items-center gap-4 py-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mdata-testid[39m=[32m"icon-check"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<p[39m
                [33mclass[39m=[32m"font-semibold text-green-800"[39m
              [36m>[39m
                [0mCaixa Aberto[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-green-600"[39m
              [36m>[39m
                [0mOperador: [0m
                [0mNÃ£o identificado[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-muted-foreground mt-1"[39m
                [33mdata-testid[39m=[32m"cash-balance"[39m
              [36m>[39m
                [0mR$Â 0,00[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border bg-card text-card-foreground shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight"[39m
            [36m>[39m
              [0mMovimentaÃ§Ãµes[0m
            [36m</h3>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
            [36m>[39m
              [0mEntradas e saÃ­das do caixa[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"overflow-auto"[39m
            [36m>[39m
              [36m<table[39m
                [33mclass[39m=[32m"w-full table-auto"[39m
                [33mdata-testid[39m=[32m"movements-list"[39m
              [36m>[39m
                [36m<thead>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"text-left"[39m
                  [36m>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"py-2"[39m
                    [36m>[39m
                      [0mTipo[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"py-2"[39m
                    [36m>[39m
            ...

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯ Failed Tests 3 âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯

 FAIL  src/pages/cash/__tests__/CashControlPage.test.tsx > CashControlPage > should handle adding a cash movement (Suprimento)
AssertionError: expected "spy" to be called with arguments: [ 'add_cash_movement', â€¦(1) ]

Received: 



Number of calls: 0


Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body[39m
    [33mdata-scroll-locked[39m=[32m"1"[39m
    [33mstyle[39m=[32m"pointer-events: none;"[39m
  [36m>[39m
    [36m<span[39m
      [33maria-hidden[39m=[32m"true"[39m
      [33mdata-aria-hidden[39m=[32m"true"[39m
      [33mdata-radix-focus-guard[39m=[32m""[39m
      [33mstyle[39m=[32m"outline: none; opacity: 0; position: fixed; pointer-events: none;"[39m
      [33mtabindex[39m=[32m"0"[39m
    [36m/>[39m
    [36m<div[39m
      [33maria-hidden[39m=[32m"true"[39m
      [33mdata-aria-hidden[39m=[32m"true"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex flex-col gap-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h1[39m
              [33mclass[39m=[32m"text-2xl font-bold tracking-tight"[39m
            [36m>[39m
              [0mControle de Caixa[0m
            [36m</h1>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-muted-foreground"[39m
            [36m>[39m
              [0mCaixa aberto desde 06:00 de 01/01/2025[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex gap-2"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-printer"[39m
              [36m/>[39m
              [0mImprimir Resumo[0m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 ml-2"[39m
              [33mdata-testid[39m=[32m"cash-supply"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-arrow-ur"[39m
              [36m/>[39m
              [0mSuprimento[0m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 ml-2"[39m
              [33mdata-testid[39m=[32m"cash-withdrawal"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-arrow-dr"[39m
              [36m/>[39m
              [0mSangria[0m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-destructive text-destructive-foreground hover:bg-destructive/90 h-10 px-4 py-2"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-clock"[39m
              [36m/>[39m
              [36m<span[39m
                [33mdata-testid[39m=[32m"close-cash"[39m
              [36m>[39m
                [0mFechar Caixa[0m
              [36m</span>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border text-card-foreground shadow-sm border-green-500 bg-green-50/50"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 flex items-center gap-4 py-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mdata-testid[39m=[32m"icon-check"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<p[39m
                [33mclass[39m=[32m"font-semibold text-green-800"[39m
              [36m>[39m
                [0mCaixa Aberto[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-green-600"[39m
              [36m>[39m
                [0mOperador: [0m
                [0mNÃ£o identificado[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-muted-foreground mt-1"[39m
                [33mdata-testid[39m=[32m"cash-balance"[39m
              [36m>[39m
                [0mR$Â 0,00[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border bg-card text-card-foreground shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight"[39m
            [36m>[39m
              [0mMovimentaÃ§Ãµes[0m
            [36m</h3>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
            [36m>[39m
              [0mEntradas e saÃ­das do caixa[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"overflow-auto"[39m
            [36m>[39m
              [36m<table[39m
                [33mclass[39m=[32m"w-full table-auto"[39m
                [33mdata-testid[39m=[32m"movements-list"[39m
              [36m>[39m
                [36m<thead>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"text-left"[39m
                  [36m>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"py-2"[39m
                    [36m>[39m
                      [0mTipo[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"py-2"[39m
                    [36m>[39m
            ...
 â¯ __vi_import_3__.waitFor.timeout src/pages/cash/__tests__/CashControlPage.test.tsx:231:28
    229|     await waitFor(
    230|       () => {
    231|         expect(mockInvoke).toHaveBeenCalledWith("add_cash_movement", {
       |                            ^
    232|           input: expect.objectContaining({
    233|             movementType: "SUPPLY",
 â¯ runWithExpensiveErrorDiagnosticsDisabled node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/config.js:47:12
 â¯ checkCallback node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:124:77
 â¯ Timeout.checkRealTimersCallback node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:118:16

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/3]âŽ¯

 FAIL  src/pages/cash/__tests__/CashControlPage.test.tsx > CashControlPage > should handle adding a cash movement (Sangria)
AssertionError: expected "spy" to be called with arguments: [ 'add_cash_movement', â€¦(1) ]

Received: 



Number of calls: 0


Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body[39m
    [33mdata-scroll-locked[39m=[32m"1"[39m
    [33mstyle[39m=[32m"pointer-events: none;"[39m
  [36m>[39m
    [36m<span[39m
      [33maria-hidden[39m=[32m"true"[39m
      [33mdata-aria-hidden[39m=[32m"true"[39m
      [33mdata-radix-focus-guard[39m=[32m""[39m
      [33mstyle[39m=[32m"outline: none; opacity: 0; position: fixed; pointer-events: none;"[39m
      [33mtabindex[39m=[32m"0"[39m
    [36m/>[39m
    [36m<div[39m
      [33maria-hidden[39m=[32m"true"[39m
      [33mdata-aria-hidden[39m=[32m"true"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex flex-col gap-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h1[39m
              [33mclass[39m=[32m"text-2xl font-bold tracking-tight"[39m
            [36m>[39m
              [0mControle de Caixa[0m
            [36m</h1>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-muted-foreground"[39m
            [36m>[39m
              [0mCaixa aberto desde 06:00 de 01/01/2025[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex gap-2"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-printer"[39m
              [36m/>[39m
              [0mImprimir Resumo[0m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 ml-2"[39m
              [33mdata-testid[39m=[32m"cash-supply"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-arrow-ur"[39m
              [36m/>[39m
              [0mSuprimento[0m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 ml-2"[39m
              [33mdata-testid[39m=[32m"cash-withdrawal"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-arrow-dr"[39m
              [36m/>[39m
              [0mSangria[0m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-destructive text-destructive-foreground hover:bg-destructive/90 h-10 px-4 py-2"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-clock"[39m
              [36m/>[39m
              [36m<span[39m
                [33mdata-testid[39m=[32m"close-cash"[39m
              [36m>[39m
                [0mFechar Caixa[0m
              [36m</span>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border text-card-foreground shadow-sm border-green-500 bg-green-50/50"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 flex items-center gap-4 py-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mdata-testid[39m=[32m"icon-check"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<p[39m
                [33mclass[39m=[32m"font-semibold text-green-800"[39m
              [36m>[39m
                [0mCaixa Aberto[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-green-600"[39m
              [36m>[39m
                [0mOperador: [0m
                [0mNÃ£o identificado[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-muted-foreground mt-1"[39m
                [33mdata-testid[39m=[32m"cash-balance"[39m
              [36m>[39m
                [0mR$Â 0,00[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border bg-card text-card-foreground shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight"[39m
            [36m>[39m
              [0mMovimentaÃ§Ãµes[0m
            [36m</h3>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
            [36m>[39m
              [0mEntradas e saÃ­das do caixa[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"overflow-auto"[39m
            [36m>[39m
              [36m<table[39m
                [33mclass[39m=[32m"w-full table-auto"[39m
                [33mdata-testid[39m=[32m"movements-list"[39m
              [36m>[39m
                [36m<thead>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"text-left"[39m
                  [36m>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"py-2"[39m
                    [36m>[39m
                      [0mTipo[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"py-2"[39m
                    [36m>[39m
            ...
 â¯ src/pages/cash/__tests__/CashControlPage.test.tsx:267:26
    265| 
    266|     await waitFor(() => {
    267|       expect(mockInvoke).toHaveBeenCalledWith("add_cash_movement", {
       |                          ^
    268|         input: expect.objectContaining({
    269|           movementType: "BLEED",
 â¯ runWithExpensiveErrorDiagnosticsDisabled node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/config.js:47:12
 â¯ checkCallback node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:124:77
 â¯ Timeout.checkRealTimersCallback node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:118:16

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/3]âŽ¯

 FAIL  src/pages/cash/__tests__/CashControlPage.test.tsx > CashControlPage > should handle movement registration failure
AssertionError: expected "spy" to be called at least once

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body[39m
    [33mdata-scroll-locked[39m=[32m"1"[39m
    [33mstyle[39m=[32m"pointer-events: none;"[39m
  [36m>[39m
    [36m<span[39m
      [33maria-hidden[39m=[32m"true"[39m
      [33mdata-aria-hidden[39m=[32m"true"[39m
      [33mdata-radix-focus-guard[39m=[32m""[39m
      [33mstyle[39m=[32m"outline: none; opacity: 0; position: fixed; pointer-events: none;"[39m
      [33mtabindex[39m=[32m"0"[39m
    [36m/>[39m
    [36m<div[39m
      [33maria-hidden[39m=[32m"true"[39m
      [33mdata-aria-hidden[39m=[32m"true"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex flex-col gap-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h1[39m
              [33mclass[39m=[32m"text-2xl font-bold tracking-tight"[39m
            [36m>[39m
              [0mControle de Caixa[0m
            [36m</h1>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-muted-foreground"[39m
            [36m>[39m
              [0mCaixa aberto desde 22:22 de 18/01/2026[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex gap-2"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-printer"[39m
              [36m/>[39m
              [0mImprimir Resumo[0m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 ml-2"[39m
              [33mdata-testid[39m=[32m"cash-supply"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-arrow-ur"[39m
              [36m/>[39m
              [0mSuprimento[0m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 ml-2"[39m
              [33mdata-testid[39m=[32m"cash-withdrawal"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-arrow-dr"[39m
              [36m/>[39m
              [0mSangria[0m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-destructive text-destructive-foreground hover:bg-destructive/90 h-10 px-4 py-2"[39m
            [36m>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"icon-clock"[39m
              [36m/>[39m
              [36m<span[39m
                [33mdata-testid[39m=[32m"close-cash"[39m
              [36m>[39m
                [0mFechar Caixa[0m
              [36m</span>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border text-card-foreground shadow-sm border-green-500 bg-green-50/50"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 flex items-center gap-4 py-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mdata-testid[39m=[32m"icon-check"[39m
            [36m/>[39m
            [36m<div>[39m
              [36m<p[39m
                [33mclass[39m=[32m"font-semibold text-green-800"[39m
              [36m>[39m
                [0mCaixa Aberto[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-green-600"[39m
              [36m>[39m
                [0mOperador: [0m
                [0mNÃ£o identificado[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-muted-foreground mt-1"[39m
                [33mdata-testid[39m=[32m"cash-balance"[39m
              [36m>[39m
                [0mR$Â 0,00[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border bg-card text-card-foreground shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight"[39m
            [36m>[39m
              [0mMovimentaÃ§Ãµes[0m
            [36m</h3>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
            [36m>[39m
              [0mEntradas e saÃ­das do caixa[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"overflow-auto"[39m
            [36m>[39m
              [36m<table[39m
                [33mclass[39m=[32m"w-full table-auto"[39m
                [33mdata-testid[39m=[32m"movements-list"[39m
              [36m>[39m
                [36m<thead>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"text-left"[39m
                  [36m>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"py-2"[39m
                    [36m>[39m
                      [0mTipo[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"py-2"[39m
                    [36m>[39m
            ...
 â¯ src/pages/cash/__tests__/CashControlPage.test.tsx:295:26
    293| 
    294|     await waitFor(() => {
    295|       expect(mockInvoke).toHaveBeenCalled();
       |                          ^
    296|     });
    297|   });
 â¯ runWithExpensiveErrorDiagnosticsDisabled node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/config.js:47:12
 â¯ checkCallback node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:124:77
 â¯ Timeout.checkRealTimersCallback node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:118:16

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/3]âŽ¯

 Test Files  1 failed | 2 passed (3)
      Tests  3 failed | 31 passed (34)
   Start at  22:22:25
   Duration  6.57s (transform 222ms, setup 198ms, collect 1.02s, tests 10.74s, environment 899ms, prepare 469ms)

