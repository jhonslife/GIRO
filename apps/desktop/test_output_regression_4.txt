
 RUN  v2.1.9 /home/jhonslife/CICLOGIRO/GIRO/apps/desktop

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should show loading state on mount
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Initializing...

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should render activation form when no license exists
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.
[LicenseActivationPage] Showing loading screen (isValidating=true)

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should render activation form when no license exists
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should format license key during typing
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should handle successful activation
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.
[LicenseActivationPage] Activation success, redirecting in 1.5s...

stdout | src/pages/cash/__tests__/CashControlPage.test.tsx > CashControlPage > should handle opening a cash session
DEBUG: handleOpenSession called 100
DEBUG: mutateAsync completed

stdout | src/pages/cash/__tests__/CashControlPage.test.tsx > CashControlPage > should handle session opening failure
DEBUG: handleOpenSession called 100

stderr | src/pages/cash/__tests__/CashControlPage.test.tsx > CashControlPage > should handle session opening failure
Error: Open Fail
    at /home/jhonslife/CICLOGIRO/GIRO/apps/desktop/src/pages/cash/__tests__/CashControlPage.test.tsx:124:7
    at file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1056:17)
    at runSuite (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1271:3)
    at file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/vitest@2.1.9_@types+node@22.19.7_@vitest+ui@2.1.9_jsdom@25.0.1/node_modules/vitest/dist/chunks/runBaseTests.3qpJUEJM.js:126:11

stderr | src/pages/cash/__tests__/CashControlPage.test.tsx > CashControlPage > should handle movement registration failure
Error: API Fail
    at /home/jhonslife/CICLOGIRO/GIRO/apps/desktop/src/pages/cash/__tests__/CashControlPage.test.tsx:290:34
    at file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1056:17)
    at runSuite (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1271:3)
    at file:///home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/vitest@2.1.9_@types+node@22.19.7_@vitest+ui@2.1.9_jsdom@25.0.1/node_modules/vitest/dist/chunks/runBaseTests.3qpJUEJM.js:126:11

 ✓ src/hooks/__tests__/useSales.test.tsx (15 tests) 617ms
 ✓ src/pages/cash/__tests__/CashControlPage.test.tsx (11 tests) 447ms
stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should handle successful activation
[LicenseActivationPage] Executing navigate to /

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should redirect to /setup after activation if has_admin is false
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.
[LicenseActivationPage] Activation success, redirecting in 1.5s...

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should redirect to /setup after activation if has_admin is false
[LicenseActivationPage] Executing navigate to /setup

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should redirect to / after activation if has_admin is true
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.
[LicenseActivationPage] Activation success, redirecting in 1.5s...

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should redirect to / after activation if has_admin is true
[LicenseActivationPage] Executing navigate to /

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should handle activation error
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseStore] Hydrating from disk...
[LicenseStore] Data from disk: null
[LicenseStore] No key found on disk, setting unlicensed
[LicenseActivationPage] Post-hydration: key=null, state=unlicensed
[LicenseActivationPage] No license to restore.

stdout | src/pages/license/__tests__/LicenseActivationPage.test.tsx > LicenseActivationPage > should redirect if valid license is found on mount
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Initializing...
[LicenseActivationPage] Hardware ID: MOCK-HWID-123
[LicenseActivationPage] Hydrating from disk...
[LicenseActivationPage] Showing loading screen (isValidating=true)
[LicenseActivationPage] Post-hydration: key=EXISTING-KEY, state=valid
[LicenseActivationPage] Valid license or within grace period, proceeding to root
[LicenseActivationPage] Showing loading screen (isValidating=true)

 ✓ src/pages/license/__tests__/LicenseActivationPage.test.tsx (8 tests) 4731ms
   ✓ LicenseActivationPage > should handle successful activation 1527ms
   ✓ LicenseActivationPage > should redirect to /setup after activation if has_admin is false 1516ms
   ✓ LicenseActivationPage > should redirect to / after activation if has_admin is true 1513ms

 Test Files  3 passed (3)
      Tests  34 passed (34)
   Start at  22:24:35
   Duration  5.67s (transform 228ms, setup 195ms, collect 1.04s, tests 5.79s, environment 889ms, prepare 481ms)

