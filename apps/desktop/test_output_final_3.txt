
 RUN  v2.1.9 /home/jhonslife/CICLOGIRO/GIRO/apps/desktop

stdout | src/__tests__/AuditFlows.test.tsx > Audit: Critical Flows Integration > Flow: Full Cash Control Cycle
[Tauri] Invoking get_current_cash_session undefined
[MOCK INVOKE] get_current_cash_session 
[Invoke Result] get_current_cash_session: null

stdout | src/__tests__/AuditFlows.test.tsx > Audit: Critical Flows Integration > Flow: Full Cash Control Cycle
DEBUG: handleOpenSession called 100.00
[Tauri] Invoking open_cash_session { input: { openingBalance: 100, employeeId: 'admin-1' } }
[MOCK INVOKE] open_cash_session {"input":{"openingBalance":100,"employeeId":"admin-1"}}
[Invoke Result] open_cash_session: {
  id: 'sess-1768788441981',
  status: 'OPEN',
  openingBalance: 100,
  openedAt: '2026-01-19T02:07:21.981Z',
  current_balance: 100
}
[Tauri] Invoking get_current_cash_session undefined
[MOCK INVOKE] get_current_cash_session 
[Invoke Result] get_current_cash_session: {
  id: 'sess-1768788441981',
  status: 'OPEN',
  openingBalance: 100,
  openedAt: '2026-01-19T02:07:21.981Z',
  current_balance: 100
}
DEBUG: mutateAsync completed
[Tauri] Invoking get_session_movements { sessionId: 'sess-1768788441981' }
[MOCK INVOKE] get_session_movements {"sessionId":"sess-1768788441981"}
[Tauri] Invoking get_cash_session_summary { sessionId: 'sess-1768788441981' }
[MOCK INVOKE] get_cash_session_summary {"sessionId":"sess-1768788441981"}
DEBUG: Computing summary. Movements count: 0
[Invoke Result] get_session_movements: []
[Invoke Result] get_cash_session_summary: {
  session: {
    id: 'sess-1768788441981',
    status: 'OPEN',
    openingBalance: 100,
    openedAt: '2026-01-19T02:07:21.981Z',
    current_balance: 100
  },
  totalSales: 0,
  totalSupplies: 0,
  totalWithdrawals: 0,
  cashInDrawer: 100,
  movements: [],
  salesByMethod: []
}

stdout | src/__tests__/AuditFlows.test.tsx > Audit: Critical Flows Integration > Flow: Full Cash Control Cycle
[Tauri] Invoking add_cash_movement {
  input: {
    sessionId: 'sess-1768788441981',
    movementType: 'SUPPLY',
    amount: 50,
    description: 'Audit Supply'
  }
}
[MOCK INVOKE] add_cash_movement {"input":{"sessionId":"sess-1768788441981","movementType":"SUPPLY","amount":50,"description":"Audit Supply"}}
DEBUG: Added movement. New size: 1
[Invoke Result] add_cash_movement: null
[Tauri] Invoking get_current_cash_session undefined
[MOCK INVOKE] get_current_cash_session 
[Tauri] Invoking get_cash_session_summary { sessionId: 'sess-1768788441981' }
[MOCK INVOKE] get_cash_session_summary {"sessionId":"sess-1768788441981"}
DEBUG: Computing summary. Movements count: 1
[Tauri] Invoking get_session_movements { sessionId: 'sess-1768788441981' }
[MOCK INVOKE] get_session_movements {"sessionId":"sess-1768788441981"}
[Invoke Result] get_current_cash_session: {
  id: 'sess-1768788441981',
  status: 'OPEN',
  openingBalance: 100,
  openedAt: '2026-01-19T02:07:21.981Z',
  current_balance: 100
}
[Invoke Result] get_cash_session_summary: {
  session: {
    id: 'sess-1768788441981',
    status: 'OPEN',
    openingBalance: 100,
    openedAt: '2026-01-19T02:07:21.981Z',
    current_balance: 100
  },
  totalSales: 0,
  totalSupplies: 50,
  totalWithdrawals: 0,
  cashInDrawer: 150,
  movements: [
    {
      id: 'mov-1768788442045',
      sessionId: 'sess-1768788441981',
      type: 'DEPOSIT',
      amount: 50,
      description: 'Audit Supply',
      createdAt: '2026-01-19T02:07:22.045Z'
    }
  ],
  salesByMethod: []
}
[Invoke Result] get_session_movements: [
  {
    id: 'mov-1768788442045',
    sessionId: 'sess-1768788441981',
    type: 'DEPOSIT',
    amount: 50,
    description: 'Audit Supply',
    createdAt: '2026-01-19T02:07:22.045Z'
  }
]

stdout | src/__tests__/AuditFlows.test.tsx > Audit: Critical Flows Integration > Flow: Full Cash Control Cycle
[Tauri] Invoking add_cash_movement {
  input: {
    sessionId: 'sess-1768788441981',
    movementType: 'BLEED',
    amount: 30,
    description: 'Audit Bleed'
  }
}
[MOCK INVOKE] add_cash_movement {"input":{"sessionId":"sess-1768788441981","movementType":"BLEED","amount":30,"description":"Audit Bleed"}}
DEBUG: Added movement. New size: 2
[Invoke Result] add_cash_movement: null
[Tauri] Invoking get_current_cash_session undefined
[MOCK INVOKE] get_current_cash_session 
[Tauri] Invoking get_cash_session_summary { sessionId: 'sess-1768788441981' }
[MOCK INVOKE] get_cash_session_summary {"sessionId":"sess-1768788441981"}
DEBUG: Computing summary. Movements count: 2
[Tauri] Invoking get_session_movements { sessionId: 'sess-1768788441981' }
[MOCK INVOKE] get_session_movements {"sessionId":"sess-1768788441981"}
[Invoke Result] get_current_cash_session: {
  id: 'sess-1768788441981',
  status: 'OPEN',
  openingBalance: 100,
  openedAt: '2026-01-19T02:07:21.981Z',
  current_balance: 100
}
[Invoke Result] get_cash_session_summary: {
  session: {
    id: 'sess-1768788441981',
    status: 'OPEN',
    openingBalance: 100,
    openedAt: '2026-01-19T02:07:21.981Z',
    current_balance: 100
  },
  totalSales: 0,
  totalSupplies: 50,
  totalWithdrawals: 30,
  cashInDrawer: 120,
  movements: [
    {
      id: 'mov-1768788442045',
      sessionId: 'sess-1768788441981',
      type: 'DEPOSIT',
      amount: 50,
      description: 'Audit Supply',
      createdAt: '2026-01-19T02:07:22.045Z'
    },
    {
      id: 'mov-1768788442095',
      sessionId: 'sess-1768788441981',
      type: 'WITHDRAWAL',
      amount: 30,
      description: 'Audit Bleed',
      createdAt: '2026-01-19T02:07:22.095Z'
    }
  ],
  salesByMethod: []
}
[Invoke Result] get_session_movements: [
  {
    id: 'mov-1768788442045',
    sessionId: 'sess-1768788441981',
    type: 'DEPOSIT',
    amount: 50,
    description: 'Audit Supply',
    createdAt: '2026-01-19T02:07:22.045Z'
  },
  {
    id: 'mov-1768788442095',
    sessionId: 'sess-1768788441981',
    type: 'WITHDRAWAL',
    amount: 30,
    description: 'Audit Bleed',
    createdAt: '2026-01-19T02:07:22.095Z'
  }
]

stdout | src/__tests__/AuditFlows.test.tsx > Audit: Critical Flows Integration > UX: Product Form should have autoComplete='off'
[Tauri] Invoking get_categories undefined
[MOCK INVOKE] get_categories 
[Invoke Result] get_categories: []

 âœ“ src/__tests__/AuditFlows.test.tsx (2 tests) 352ms

 Test Files  1 passed (1)
      Tests  2 passed (2)
   Start at  22:07:20
   Duration  1.64s (transform 202ms, setup 61ms, collect 600ms, tests 352ms, environment 299ms, prepare 174ms)

