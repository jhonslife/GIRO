
 RUN  v2.1.9 /home/jhonslife/CICLOGIRO/GIRO/apps/desktop

stderr | src/__tests__/App.test.tsx > App > should redirect to /setup if no admin exists
[GlobalSetupGate] No Admin detected (hasAdmin=false). Forcing redirect from / to /setup
üö© [Navigation] Path changed to: /
‚ùå [GlobalSetupGate] State mismatch: No admin in DB but frontend has state. PURGING.
Error: Uncaught [TypeError: logout is not a function]
    at reportException (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at reportUncaughtErrorInDEV (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:22877:5)
    at captureCommitPhaseError (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:27165:5) TypeError: logout is not a function
    at /home/jhonslife/CICLOGIRO/GIRO/apps/desktop/src/App.tsx:111:9
    at commitHookEffectListMount (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:23189:26)
    at commitPassiveMountOnFiber (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:24970:11)
    at commitPassiveMountEffects_complete (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:24930:9)
    at commitPassiveMountEffects_begin (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:24917:7)
    at commitPassiveMountEffects (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:24905:3)
    at flushPassiveEffectsImpl (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:27078:3)
    at flushPassiveEffects (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:27023:14)
    at /home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:26808:9
    at flushActQueue (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/react@18.3.1/node_modules/react/cjs/react.development.js:2667:24)
The above error occurred in the <GlobalSetupGate> component:

    at GlobalSetupGate (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/src/App.tsx:119:28)
    at div
    at SessionGuard (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/src/__tests__/App.test.tsx:80:20)
    at App (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/src/App.tsx:190:3)
    at Router (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/react-router@6.30.3_react@18.3.1/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at MemoryRouter (/home/jhonslife/CICLOGIRO/GIRO/apps/desktop/node_modules/.pnpm/react-router@6.30.3_react@18.3.1/node_modules/react-router/dist/umd/react-router.development.js:1101:7)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

stderr | src/__tests__/App.test.tsx > App > should redirect to /login if NOT authenticated in ProtectedRoute
üö© [Navigation] Path changed to: /pdv
üö© [Navigation] Path changed to: /login

stderr | src/__tests__/App.test.tsx > App > should handle F1 hotkey to navigate to tutorials
üö© [Navigation] Path changed to: /pdv
üö© [Navigation] Path changed to: /tutorials

stderr | src/__tests__/App.test.tsx > App > should show loading state in AdminCheck
üö© [Navigation] Path changed to: /

stderr | src/__tests__/App.test.tsx > App > should respect role-based access in ProtectedRoute
üö© [Navigation] Path changed to: /employees
üö© [Navigation] Path changed to: /pdv

stderr | src/__tests__/App.test.tsx > App > should redirect to wizard from RootRedirect when not configured
üö© [Navigation] Path changed to: /wizard

stderr | src/__tests__/App.test.tsx > App > should handle WizardRoute redirect to PDV when already configured
üö© [Navigation] Path changed to: /wizard
üö© [Navigation] Path changed to: /pdv

 ‚ùØ src/__tests__/App.test.tsx (7 tests | 1 failed) 68ms
   √ó App > should redirect to /setup if no admin exists 28ms
     ‚Üí logout is not a function

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ Failed Tests 1 ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ

 FAIL  src/__tests__/App.test.tsx > App > should redirect to /setup if no admin exists
TypeError: logout is not a function
 ‚ùØ src/App.tsx:111:9
    109|           '‚ùå [GlobalSetupGate] State mismatch: No admin in DB but fron‚Ä¶
    110|         );
    111|         logout();
       |         ^
    112|         resetProfile();
    113|         setIsCleaningUp(true);
 ‚ùØ commitHookEffectListMount node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:23189:26
 ‚ùØ commitPassiveMountOnFiber node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:24970:11
 ‚ùØ commitPassiveMountEffects_complete node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:24930:9
 ‚ùØ commitPassiveMountEffects_begin node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:24917:7
 ‚ùØ commitPassiveMountEffects node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:24905:3
 ‚ùØ flushPassiveEffectsImpl node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:27078:3
 ‚ùØ flushPassiveEffects node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:27023:14
 ‚ùØ node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:26808:9
 ‚ùØ flushActQueue node_modules/.pnpm/react@18.3.1/node_modules/react/cjs/react.development.js:2667:24

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/1]‚éØ

 Test Files  1 failed (1)
      Tests  1 failed | 6 passed (7)
   Start at  22:26:02
   Duration  2.30s (transform 602ms, setup 63ms, collect 1.53s, tests 68ms, environment 289ms, prepare 173ms)

